Return context needed to saddle up on a
{jjdhr_heat}:
the current
{jjdpr_pace}
(first in
{jjdhm_order}
whose state is
{jjdpe_rough}
or
{jjdpe_bridled})
and its
{jjdkr_tack}
details.

{jjds_arguments}

// ⟦axd_optional axd_defaulted⟧
* {jjda_file}

// ⟦axd_optional axd_defaulted⟧
* {jjdt_firemark}
(positional) — target
{jjdhr_heat}.
If omitted, uses first
{jjdhe_racing}
heat.
Returns error if no racing heats exist.

{jjds_stdout} Plain text format with labeled sections.
Section `Racing-heats:` shows all racing heats in muster table format.
[source,text]
----
Racing-heats:
₣Fire    Silks                       Status  Done  Total
───────  ──────────────────────────  ──────  ────  ─────
₣XX      heat-silks-name             racing     3     10
...

Heat: <silks> (₣<firemark>) [<status>]
Paddock: <paddock_file_path>

Paddock-content:
  <line 1 of paddock content>
  <line 2 of paddock content>
  ...

Next: <pace_silks> (₢<coronet>) [<state>]

Docket:
  <line 1 of docket>
  <line 2 of docket>
  ...

Work-files:
  <bare_filename_1>
  <bare_filename_2>
  ...

Warrant:
  <line 1 of warrant>
  <line 2 of warrant>
  ...

Recent-work:
Commit    Identity  Subject
-------------------------------
abcd1234  ₢XXXXX    ...
efgh5678  ₢XXXXX    ...
...

File-touch bitmap (x = pace commit touched file):

  1 B vos-add-routines-section
  2 D jjsa-session-probe-update
  3 * heat-level

BD*
xxx jjrg_gallops.rs, jjrt_types.rs
··x JJSA-GallopsData.adoc
x·· jjro_ops.rs

Commit swim lanes (x = commit affiliated with pace):

  1 B vos-add-routines-section
  2 D jjsa-session-probe-update
  3 * heat-level

123456789ab
··xx·xx····  D  4c
xx··x······  B  3c
··········x  *  1c

Session-probe:
  haiku: claude-3-5-haiku-20241022
  sonnet: claude-sonnet-4-20250514
  opus: claude-opus-4-5-20251101
  host: macbook-pro.local
  platform: darwin-arm64
----

Sections `Next:` through `Warrant:` are absent if no actionable pace exists.
Field `pace_silks` is derived from `tacks[0].silks`.
Section `Warrant:` is present only when pace state is
{jjdpe_bridled}.
Section `Paddock-content:` contains the full text of the paddock file, indented 2 spaces.
Section `Work-files:` lists files touched by the actionable pace's commits (excluding `.claude/jjm/*`), indented 2 spaces, sorted, one per line.
Section `Recent-work:` contains the last 10 steeplechase entries for the heat (from
{jjdo_log}),
formatted as column-aligned table.
Section `File-touch bitmap:` displays which files were touched by commits affiliated with each pace.
Output format matches
{jjdo_show}
heat view: vertical legend mapping pace terminal chars to silks, column-header line of terminal characters, then bitmap rows grouping files by identical touch patterns.
Section `Commit swim lanes:` displays commit activity across paces in chronological order.
Output format matches
{jjdo_show}
heat view: vertical legend, column-header line (commits dense-encoded 1-9 then a-z then A-Z), then bitmap rows showing pace × commits matrix with row labels (terminal char) and commit count suffix.
Section `Session-probe:` contains model IDs and system context collected via session probe, indented 2 spaces, one key-value per line.

{jjds_exit_uniform} 0 success, non-zero error.

{jjds_behavior}

. Collect all heats with status
{jjdhe_racing}.
Render column-aligned table using same format as
{jjdo_list}
(₣Fire, Silks, Status, Done, Total).
Output as `Racing-heats:` section.
. Read
{jjdgr_gallops}
from file
. Verify
{jjdhr_heat}
exists with given
{jjdt_firemark}
. Error if
{jjdhm_status}
is
{jjdhe_stabled}
("Cannot saddle stabled heat {firemark}")
. Output `heat_silks` from
{jjdhr_heat}
. Output `paddock_file` from
{jjdhm_paddock}
. Read paddock file contents, output as `paddock_content`
. Walk
{jjdhm_order}
array in sequence
. For each
{jjdt_coronet},
check `paces[coronet].tacks[0].state`
. If state is
{jjdpe_rough}
or
{jjdpe_bridled}:
.. Output `pace_coronet`,
`pace_silks` (from `tacks[0].silks`),
`pace_state`
.. Output `docket` from `tacks[0].text`
.. Query steeplechase entries for heat, filter by actionable pace coronet, run `git diff-tree` per commit, collect unique work file names (excluding `.claude/jjm/*`), output as `Work-files:` section (2-space indented, sorted, one per line)
.. If state is
{jjdpe_bridled},
output `warrant` from `tacks[0].direction`
.. Stop walking (first match wins)
. If no actionable pace found, output only `heat_silks`, `paddock_file`, `paddock_content`, and `recent_work`
. Get last 10 steeplechase entries for the heat via
{jjdo_log}
logic, output as `recent_work` array
. If session probe is needed (gap > 1 hour since last commit), call vosr_probe routine and output `Session-probe:` section with model IDs (haiku, sonnet, opus) and system context (host, platform)
