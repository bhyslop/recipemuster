
Relocate a single
{jjdpr_pace}
within a
{jjdhr_heat}
by updating
{jjdhm_order}.

*Invocation:*
----
vvx jjx_reorder <FIREMARK> --move <CORONET> [--before <TARGET> | --after <TARGET> | --first | --last]
----

{jjds_arguments}

// ⟦axd_optional axd_defaulted⟧
* {jjda_file}

// ⟦axd_required⟧
* {jjdt_firemark}
(positional) — target
{jjdhr_heat}

// ⟦axd_required⟧
* {jjda_move}
— {jjdt_coronet}
to relocate

// ⟦axd_required⟧
* Exactly one positioning flag:
{jjda_before},
{jjda_after},
{jjda_first},
or
{jjda_last}

{jjds_stdout} Updated
{jjdhm_order}
array, one
{jjdt_coronet}
per line, in new sequence.

{jjds_exit_uniform} 0 success, non-zero error.

{jjds_behavior}

.
{jjdr_load}
{jjda_file};
on failure, exit immediately with
{jjdr_load}
error status
. Verify
{jjdhr_heat}
exists with given
{jjdt_firemark}
. Validate
{jjda_move}
{jjdt_coronet}
exists in
{jjdhr_heat}
. Validate exactly one positioning flag provided
. If
{jjda_before}
or
{jjda_after}:
validate target
{jjdt_coronet}
exists and differs from
{jjda_move}
{jjdt_coronet}
. Remove
{jjda_move}
{jjdt_coronet}
from current position in
{jjdhm_order}
. Insert at new position:
.. If
{jjda_first}:
insert before first actionable pace (or append if none)
.. If
{jjda_last}:
append to end
.. If
{jjda_before}:
insert immediately before target
{jjdt_coronet}
.. If
{jjda_after}:
insert immediately after target
{jjdt_coronet}
.
{jjdr_save}
{jjdgr_gallops}
to
{jjda_file}
. Output new
{jjdhm_order},
one
{jjdt_coronet}
per line

*Validation errors:*

[cols="2,3"]
|===
| Condition | Error

| {jjda_move} with positional coronets
| "Cannot combine --move with positional coronets"

| {jjda_move} {jjdt_coronet} not found
| "Pace {coronet} not found in heat {firemark}"

| No positioning flag provided
| "Move mode requires exactly one positioning flag"

| Multiple positioning flags
| "Conflicting positioning flags: {flags}"

| Target same as move
| "Cannot position pace relative to itself"

| Target {jjdt_coronet} not found
| "Target pace {coronet} not found in heat {firemark}"
|===
