Mark a pace complete and commit all changes in one self-contained operation.
This routine combines staging, committing, state transition, and chalk marker creation.
Used by `/jjc-pace-wrap` to provide a single-command wrap experience.

{jjds_arguments}

// ⟦axd_required⟧
* {jjdt_coronet}
(positional) — pace to wrap

// ⟦axd_optional⟧
* stdin — wrap summary text (used as chalk description; if absent, uses "pace {silks} complete")
* `--size-limit` — maximum commit size in bytes (default: 50KB)

{jjds_behavior}

. Acquire lock (`refs/vvg/locks/vvx`)
. Stage all changes (`git add -A`)
. Size guard check:
.. Get staged content size
.. If over limit: release lock, exit 2
. Generate commit message via Claude from diff
. Commit staged changes
. Transition pace state to complete via internal tack prepend (state={jjdpe_complete})
. Create W chalk marker with outcome summary (uses stdin if provided, else "pace {silks} complete" from gallops)
. Lookahead: walk parent heat's order array for next actionable pace (first with state {jjdpe_rough} or {jjdpe_bridled})
. Emit `AGENT_RESPONSE:` line to stderr:
.. If next pace found: `AGENT_RESPONSE: ₢{coronet} wrapped. Next: {next_silks} (₢{next_coronet}) — \`/clear\` then \`/jjc-heat-mount {firemark}\``
.. If no next pace: `AGENT_RESPONSE: ₢{coronet} wrapped. All paces complete — \`/clear\` then \`/jjc-heat-retire {firemark}\``
. Release lock
. Return commit hash

{jjds_exit_enumerated}

* 0 — success
* 1 — general error (parse failure, gallops error, git error)
* 2 — size guard exceeded (use --size-limit to override)

*Design rationale:*
{jjdr_wrap}
consolidates the multi-step wrap workflow into a single vvx command.
This eliminates the need for slash commands to orchestrate separate notch, tally, and chalk operations.
The distinct exit code 2 for size guard allows callers to advise users about the --size-limit flag.
