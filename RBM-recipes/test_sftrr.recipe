# Attempt at a container for rook radar using swift


FROM fedora:latest

# Install dependencies for Swift
RUN dnf update -y && dnf install -y \
    binutils \
    gcc \
    git \
    glibc-static \
    libbsd-devel \
    libcurl-devel \
    libedit-devel \
    libicu-devel \
    libstdc++-static \
    libxml2-devel \
    pkg-config \
    python3 \
    sqlite-devel \
    tzdata \
    unzip \
    zip \
    zlib-devel

# Download and install Swift
ARG SWIFT_VERSION=5.9.2
ARG SWIFT_PLATFORM=centos8
ARG SWIFT_BRANCH=swift-${SWIFT_VERSION}-release
ARG SWIFT_URL=https://download.swift.org/swift-${SWIFT_VERSION}-release/${SWIFT_PLATFORM}/swift-${SWIFT_VERSION}-RELEASE/swift-${SWIFT_VERSION}-RELEASE-${SWIFT_PLATFORM}.tar.gz

RUN curl -fSsL ${SWIFT_URL} -o swift.tar.gz \
    && mkdir -p /usr/local/swift \
    && tar -xzf swift.tar.gz --strip-components=1 -C /usr/local/swift \
    && rm swift.tar.gz

# Set Swift in PATH
ENV PATH="/usr/local/swift/usr/bin:${PATH}"

# Verify installation
RUN swift --version
