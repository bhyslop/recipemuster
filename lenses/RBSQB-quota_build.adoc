The
{at_operator}
reviews
{gcb_service}
quota settings for a
{rbtgi_depot_project}
to verify that the
{rbrr_gcb_machine_type}
and the *Concurrent Build CPUs* quota permit the desired level of parallel build execution.

The default *Concurrent Build CPUs* quota is 10 per region.
Each
{rbtgo_trigger_build}
invocation consumes vCPUs according to the configured machine type.
If the machine type consumes most of the CPU quota (e.g., `E2_HIGHCPU_8` uses 8 of 10 CPUs), builds serialize because a second invocation cannot acquire enough CPUs.

The primary remedy is selecting a machine type whose vCPU count divides evenly into the available CPU quota:

* `UNSPECIFIED` (2 vCPUs): 5 concurrent builds in 10-CPU quota
* `E2_HIGHCPU_8` (8 vCPUs): 1 concurrent build in 10-CPU quota
* `E2_HIGHCPU_32` (32 vCPUs): requires 32+ CPU quota for even 1 build

// ⟦axs_inputs⟧
. *Prerequisites*:
.. {rbhg_require}
{rbtgi_depot}
exists (completed
{rbtgo_depot_create})
.. {rbhg_require}
`«DEPOT_PROJECT_ID»` known from
{rbtgo_depot_create}
output
.. {rbhg_require}
Console access to the depot project with Owner or Quota Administrator IAM role

// ⟦axs_behavior⟧
. *Navigate to Cloud Build Quotas*:
.. Open Google Cloud Console
.. Select the depot project (`«DEPOT_PROJECT_ID»`) from the project selector
.. Navigate to *IAM & Admin > Quotas & System Limits*
.. In the filter bar, enter `cloudbuild.googleapis.com` to show only
{gcb_service}
quotas
.. Locate the *Concurrent Build CPUs (Regional Default Pool)* row for the depot region
.. {rbhg_store}
current CPU quota value as `«CPU_QUOTA»`
.. {rbhg_store}
current usage percentage — if near 100% with one build running, the machine type is consuming most of the quota

. *Evaluate Machine Type vs CPU Quota*:
.. {rbhg_store}
current
{rbrr_gcb_machine_type}
from the regime configuration
.. Compute maximum concurrent builds: `«CPU_QUOTA»` ÷ vCPUs per machine type
.. If maximum concurrent builds is less than desired:
... *Option A (preferred)*: Reduce machine type in regime configuration to fit more builds in existing quota.
Set
{rbrr_gcb_machine_type}
to `UNSPECIFIED` (2 vCPUs) for 5 concurrent builds in a 10-CPU quota.
... *Option B*: Request a CPU quota increase via *Edit Quotas* to accommodate the current machine type.
Google reviews quota increase requests; small increases are typically granted without friction.

. *Confirm Quota Headroom*:
.. After changing machine type or receiving quota increase, return to *IAM & Admin > Quotas & System Limits*
.. Filter for `cloudbuild.googleapis.com` and verify the *Concurrent Build CPUs* row
.. {rbhg_require}
quota headroom supports the desired number of concurrent builds: `«CPU_QUOTA»` ≥ (desired concurrency × vCPUs per machine type)

// ⟦axs_outputs⟧

The
{rbtgi_depot_project}
is configured for the desired level of concurrent build execution through alignment of
{rbrr_gcb_machine_type}
and CPU quota.

// ⟦axs_completion⟧

NOTE: If the desired concurrency exceeds what the default pool CPU quota permits even after machine type adjustment, a
{gcb_service}
private worker pool with explicit concurrency settings is an alternative.
This would require additional regime configuration beyond the scope of this procedure.
