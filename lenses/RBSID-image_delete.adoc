NOTE: This operation deletes a container image from
{rbtgi_repository}
using the Docker Registry HTTP API V2 implemented by
{gar_service}.

NOTE: To delete an entire {rbtga_ark} (both `-image` and `-about` artifacts), use {rbtgo_ark_abjure} instead.

The
{rbtr_director}
deletes an image by {rbst_locator}:

// ⟦axs_inputs⟧
. *Validate Input Parameters*:
.. {rbbc_require}
`«INPUT_LOCATOR»` provided as first argument in `moniker:tag` format
.. {rbbc_fatal}
if missing: "Locator parameter required (moniker:tag)"
.. {rbbc_fatal}
if malformed (no colon): "Invalid locator format. Expected moniker:tag"
.. {rbbc_store}
`«MONIKER»` as portion before first colon
.. {rbbc_store}
`«TAG»` as portion after first colon

// ⟦axs_behavior⟧
. *Authenticate as
{rbtr_director}*:
.. Execute
{rbtoe_director_authenticate}
.. {rbbc_store}
`«DIRECTOR_TOKEN»` for subsequent API calls

. *Confirm Deletion*:
.. Unless `--force` flag is provided:
... {rbbc_show}
`Will delete: «INPUT_LOCATOR»`
... {rbbc_require}
user types `yes` to confirm
... {rbbc_fatal}
if not confirmed: "prompt not confirmed."

. *Delete Tag*:
.. {rbbc_call}
link:https://github.com/opencontainers/distribution-spec/blob/main/spec.md#deleting-tags[Docker Registry API: DELETE manifests] with:
... method: `DELETE`
... endpoint: `«REGISTRY_BASE»/«MONIKER»/manifests/«TAG»`
... header: `Authorization: Bearer «DIRECTOR_TOKEN»`
.. {rbbc_require}
HTTP 202 (Accepted) or 204 (No Content) response
.. {rbbc_fatal}
if delete fails: "Delete failed with HTTP «STATUS_CODE»"

// ⟦axs_outputs⟧
. *Display Results*:
.. {rbbc_show}
`Deleted or nonexistent: «INPUT_LOCATOR»`

// ⟦axs_completion⟧
Procedure completes successfully when the tag has been deleted from the registry and the deleted message is displayed.
