NOTE: This operation retrieves a container image from
{rbtgi_repository}
to the local container runtime. The
{rbtr_retriever}
has read-only access to the repository.

The
{rbtr_retriever}
pulls an image by {rbst_locator}:

// ⟦axs_inputs⟧
. *Validate Input Parameters*:
.. {rbbc_require}
`«INPUT_LOCATOR»` provided as first argument in `moniker:tag` format
.. {rbbc_fatal}
if missing: "Locator parameter required (moniker:tag)"
.. {rbbc_fatal}
if malformed (no colon): "Invalid locator format. Expected moniker:tag"
.. {rbbc_store}
`«MONIKER»` as portion before first colon
.. {rbbc_store}
`«TAG»` as portion after first colon

// ⟦axs_behavior⟧
. *Authenticate as
{rbtr_retriever}*:
.. Execute
{rbtoe_retriever_authenticate}
.. {rbbc_store}
`«RETRIEVER_TOKEN»` for subsequent operations

. *Construct Registry Reference*:
.. {rbbc_store}
`«REGISTRY_HOST»` as `{rbrr_gcp_region}-docker.pkg.dev`
.. {rbbc_store}
`«FULL_IMAGE_REF»` as `«REGISTRY_HOST»/{rbrr_depot_project_id}/{rbrr_gar_repository}/«INPUT_LOCATOR»`

. *Configure Container Runtime Authentication*:
.. {rbbc_call}
container runtime login with:
... registry: `«REGISTRY_HOST»`
... username: `oauth2accesstoken`
... password: `«RETRIEVER_TOKEN»`
.. {rbbc_require}
login successful
.. {rbbc_fatal}
if login fails: "Container runtime authentication failed"

. *Pull Image*:
.. {rbbc_call}
link:https://github.com/opencontainers/distribution-spec/blob/main/spec.md#pulling-manifests[Docker Registry API: pull] via container runtime:
... command: `docker pull «FULL_IMAGE_REF»` or `podman pull «FULL_IMAGE_REF»`
.. {rbbc_require}
pull completes successfully
.. {rbbc_store}
`«IMAGE_ID»` from pulled image metadata
.. {rbbc_fatal}
if pull fails: "Image pull failed"

// ⟦axs_outputs⟧
. *Display Results*:
.. {rbbc_show}
image retrieved: `«FULL_IMAGE_REF»`
.. {rbbc_show}
local image ID: `«IMAGE_ID»`

// ⟦axs_completion⟧
Successful execution retrieves the image and displays the local image ID.
