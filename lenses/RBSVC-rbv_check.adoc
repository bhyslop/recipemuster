NOTE: This operation verifies whether newer VM images are available upstream by comparing SHA digests. It uses a temporary
{at_stash_machine}
with crane installed to query registries without modifying configuration.

// ⟦axs_behavior⟧
. *Create Temporary {at_stash_machine}*:
.. {rbbc_use}
{rbrr_stash_machine} as machine name
.. {rbbc_call}
podman machine init for `{rbrr_stash_machine}`
.. {rbbc_call}
podman machine start for `{rbrr_stash_machine}`
.. {rbbc_call}
installation of crane from {rbrr_crane_tar_gz}
.. {rbbc_require}
crane installation successful
.. {rbbc_store}
`«STASH_MACHINE»` as temporary machine identifier

. *Query Upstream Image*:
.. {rbbc_use}
{rbrr_chosen_vmimage_origin}:{rbrr_chosen_podman_version} as query target
.. {rbbc_call}
crane digest for upstream image
.. {rbbc_store}
`«UPSTREAM_SHA»` from crane response
.. {rbbc_fatal}
if no valid digest returned: "Failed to query upstream image digest"

. *Verify Custom FQIN*:
.. {rbbc_require}
{rbrr_chosen_vmimage_fqin} defined
.. If {rbrr_chosen_vmimage_fqin} differs from {rbrr_chosen_vmimage_origin}:{rbrr_chosen_podman_version}:
... {rbbc_call}
crane digest for {rbrr_chosen_vmimage_fqin}
... {rbbc_store}
`«FQIN_SHA»` from crane response
... Compare `«FQIN_SHA»` with `«UPSTREAM_SHA»`
... {rbbc_warn}
if digests differ: "Custom FQIN digest does not match upstream"

. *Cleanup Resources*:
.. {rbbc_call}
podman machine stop for `«STASH_MACHINE»`
.. {rbbc_call}
podman machine rm for `«STASH_MACHINE»`
.. {rbbc_require}
no orphaned resources remain

// ⟦axs_outputs⟧
. *Report Findings*:
.. {rbbc_show}
current {rbrr_chosen_vmimage_sha} value (if set)
.. {rbbc_show}
latest upstream SHA: `«UPSTREAM_SHA»`
.. {rbbc_show}
required action:
... If {rbrr_chosen_vmimage_sha} not set: "Please set RBRR_CHOSEN_VMIMAGE_SHA to «UPSTREAM_SHA»"
... If {rbrr_chosen_vmimage_sha} differs from `«UPSTREAM_SHA»`: "Update available"
... If {rbrr_chosen_vmimage_sha} matches `«UPSTREAM_SHA»`: "System is current"

// ⟦axs_completion⟧
Successful execution reports upstream VM image status and indicates whether updates are available.
